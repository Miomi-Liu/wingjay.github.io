title: 自己动手改造个人博客
date: 2017-06-08 12:12:37
permalink: rebuild-personal-blog
categories:
  - 个人博客
  - 一天变cool
tags:
  - GitHub
  - Blog
  - Hexo
commentIssueId: 1  
---

个人博客不仅是个人写作的地方，更是一个展示自己个性、扩大个人影响力的产品。

之前我写过一篇

<!-- more -->

## 中英文自动添加空格
不少有追求的开发者在日常写代码时，不仅追求逻辑正确，也追求代码格式简洁优雅。

同样的，我们在写博客时也追求格式优雅。这其中有一点就是`中英文间隔`，即每个中英文之间要用空格分开，而不是紧紧贴在一起。为了达到这个目的，很多时候就必须在写文时反复调整英文单词与中文的空格。

这样的追求值得认可，但`反复检查空格并添加`这样的做法未免有点傻。

这里介绍一个小巧的插件：[Auto-Spacing](https://github.com/hexojs/hexo-filter-auto-spacing)，它会在将 markdown 文章转化成 html 时，自动为中英文添加空格。

安装方法：
在项目根目录下，执行 `npm install hexo-filter-auto-spacing --save`。执行完后可以在根目录的 `package.json` 里找到一行 `denpendency`:`"hexo-filter-auto-spacing": "^0.2.1"`。未来写文后，它会自动添加中英文间空格。

**提醒**
使用这个工具要留意一点：如果你在文章里使用了中英文混合的url，如我本地的图片 `http://wingjay.com/img/我的博客.png`，它会变成 `http://wingjay.com/img/ 我的博客.png`，因此，这里推荐所有图片等资源的url都使用英文。

## 添加推荐相关文章功能
原生的


利用Hexo提供的Helper功能，https://hexo.io/zh-cn/api/helper.html
创建一个js文件，基于tag来找到推荐的文章，并插入到文章模版里。
1. themes/myNext/scripts 创建related_posts
```javascript
hexo.extend.helper.register('related_posts', function(currentPost, allPosts){
    var relatedPosts = [];
    currentPost.tags.forEach(function (tag) {
        allPosts.forEach(function (post) {
            if (isTagRelated(tag.name, post.tags)) {
                var relatedPost = {
                    title: post.title,
                    path: post.path,
                    weight: 1
                };

                var index = findItem(relatedPosts, 'path', post.path);

                if (index != -1) {
                    relatedPosts[index].weight += 1;
                } else{
                    if (currentPost.path != post.path) {
                        relatedPosts.push(relatedPost);
                    };
                };
            };
        });
    });

    if (relatedPosts.length == 0) {return ''};

    var result = '<h3>相关文章：</h3><ul class="related-posts">';
    relatedPosts = relatedPosts.sort(compare('weight'));
    for (var i = 0; i < Math.min(relatedPosts.length, 10); i++) {
        result += '<li><a href="/' + relatedPosts[i].path + '">' + relatedPosts[i].title + '</a></li>';
    };
    result += '</ul>';

    // console.log(relatedPosts);
    return result;
});

hexo.extend.helper.register('echo', function(path){
  return path;
});

function isTagRelated (tagName, TBDtags) {
    var result = false;
    TBDtags.forEach(function (tag) {
        if (tagName == tag.name) {
            result = true;
        };
    })

    return result;
}

function findItem (arrayToSearch, attr, val) {
    for (var i = 0; i < arrayToSearch.length; i++) {
        if (arrayToSearch[i][attr] == val) {
            return i
        };
    };

    return -1;
}

function compare (attr) {
    return function (a, b) {
        var val1 = a[attr];
        var val2 = b[attr];
        return val2 - val1;
    }
}
```
代码来自 https://ethanblog.com/tech/hexo-related-posts.html
2. myNext/layout/_macro/post.swig
```
{% if not is_index %} // 不需要显示在首页。
	{{ related_posts(post, site.posts) }}
{% endif %}
```
注意，如果是 ejs 文件，则要把`{ { }}`换成"<\%- \%>"格式，这是语法差别。

swig语法介绍 http://jinfang.oschina.io/posts/124966c9/

## 添加个人简历页面
对于一个优秀的博主而言，每天会有很多开发者进入到他的博客。

而无论出于职业生涯还是个人影响力的角度考虑，在博客里放置个人简历是一个很好的展示自己的机会。

下面我们来利用 `hexo` 的 `page` 功能来创建一个新页面，然后用 markdown 来填充这个简历页面。

1. 利用 `hexo new page "resume"`，可以看到 `source` 文件夹下出现了 `resume` 目录，里面有一个 `index.md` 文件；
2. 在 `themes/next/_config.yml` 里的 `menu:` 下添加 `resume: /resume`，它会在首页创建一个新的 menu: resume 入口；
3. 在 `index.md` 文件里填写自己的简历即可。

最终效果参考本人[简历](/resume)
  
## 添加github issue 评论功能

jquery cdn http://www.bootcdn.cn/jquery/
－ https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js 30ms
－ https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js  270ms

参考：https://github.com/mkoohafkan/mkoohafkan.github.io/blob/master/_includes/post_comments.html
https://github.com/mkoohafkan/mkoohafkan.github.io/issues/23
https://github.com/mkoohafkan/mkoohafkan.github.io/blob/master/_posts/2017-01-19-using-github-to-host-blog-comments.md
http://hydroecology.net/using-github-to-host-blog-comments/


http://ivanzuzak.info/2011/02/18/github-hosted-comments-for-github-hosted-blogs.html
https://imququ.com/post/readme.html#comments

## RSS

## SEO优化
生成sitemap
https://github.com/ludoviclefevre/hexo-generator-seo-friendly-sitemap