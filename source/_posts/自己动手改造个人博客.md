title: 自己动手改造个人博客
date: 2017-06-08 12:12:37
ermalink: cool-personal-blog
categories:
  - 个人博客
  - 一天变cool
tags:
  - GitHub
  - Blog
  - Hexo
commentIssueId: 1  
---
under building

<!-- more -->

## 中英文自动添加空格
Auto-Spacing
python脚本自动添加空格
## 添加推荐相关文章 功能
利用Hexo提供的Helper功能，https://hexo.io/zh-cn/api/helper.html
创建一个js文件，基于tag来找到推荐的文章，并插入到文章模版里。
1. themes/myNext/scripts 创建related_posts
```javascript
hexo.extend.helper.register('related_posts', function(currentPost, allPosts){
    var relatedPosts = [];
    currentPost.tags.forEach(function (tag) {
        allPosts.forEach(function (post) {
            if (isTagRelated(tag.name, post.tags)) {
                var relatedPost = {
                    title: post.title,
                    path: post.path,
                    weight: 1
                };

                var index = findItem(relatedPosts, 'path', post.path);

                if (index != -1) {
                    relatedPosts[index].weight += 1;
                } else{
                    if (currentPost.path != post.path) {
                        relatedPosts.push(relatedPost);
                    };
                };
            };
        });
    });

    if (relatedPosts.length == 0) {return ''};

    var result = '<h3>相关文章：</h3><ul class="related-posts">';
    relatedPosts = relatedPosts.sort(compare('weight'));
    for (var i = 0; i < Math.min(relatedPosts.length, 10); i++) {
        result += '<li><a href="/' + relatedPosts[i].path + '">' + relatedPosts[i].title + '</a></li>';
    };
    result += '</ul>';

    // console.log(relatedPosts);
    return result;
});

hexo.extend.helper.register('echo', function(path){
  return path;
});

function isTagRelated (tagName, TBDtags) {
    var result = false;
    TBDtags.forEach(function (tag) {
        if (tagName == tag.name) {
            result = true;
        };
    })

    return result;
}

function findItem (arrayToSearch, attr, val) {
    for (var i = 0; i < arrayToSearch.length; i++) {
        if (arrayToSearch[i][attr] == val) {
            return i
        };
    };

    return -1;
}

function compare (attr) {
    return function (a, b) {
        var val1 = a[attr];
        var val2 = b[attr];
        return val2 - val1;
    }
}
```
代码来自 https://ethanblog.com/tech/hexo-related-posts.html
2. myNext/layout/_macro/post.swig
```
{% if not is_index %} // 不需要显示在首页。
	{{ related_posts(post, site.posts) }}
{% endif %}
```
注意，如果是 ejs 文件，则要把`{ { }}`换成"<\%- \%>"格式，这是语法差别。

swig语法介绍 http://jinfang.oschina.io/posts/124966c9/

## 添加个人简历页面

## 添加github issue 评论功能

jquery cdn http://www.bootcdn.cn/jquery/
－ https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js 30ms
－ https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js  270ms

参考：https://github.com/mkoohafkan/mkoohafkan.github.io/blob/master/_includes/post_comments.html
https://github.com/mkoohafkan/mkoohafkan.github.io/issues/23
https://github.com/mkoohafkan/mkoohafkan.github.io/blob/master/_posts/2017-01-19-using-github-to-host-blog-comments.md
http://hydroecology.net/using-github-to-host-blog-comments/


http://ivanzuzak.info/2011/02/18/github-hosted-comments-for-github-hosted-blogs.html
https://imququ.com/post/readme.html#comments

## RSS

## SEO优化
生成sitemap
https://github.com/ludoviclefevre/hexo-generator-seo-friendly-sitemap